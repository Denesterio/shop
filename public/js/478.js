(self.webpackChunk=self.webpackChunk||[]).push([[478],{9067:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,".crumbs[data-v-1edb78ea]{font-size:.9rem;background-color:#f8fafc}",""]);const s=n},5735:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,"h2[data-v-55049f08]{font-family:PT Sans,sans-serif;font-size:1.5rem;font-weight:700}.header_authors[data-v-55049f08]{font-size:.9rem;margin-bottom:.5rem}.header_authors a[data-v-55049f08]{margin:0 .5rem}.table[data-v-55049f08]{font-size:.9rem}#priceBadge[data-v-55049f08]{max-width:230px;min-width:190px;max-height:-webkit-fit-content;max-height:-moz-fit-content;max-height:fit-content;box-shadow:inset 0 0 0 5px rgba(52,144,220,.6)}.price[data-v-55049f08]{font-size:1.7rem;color:#3490dc;font-weight:700}#productDescription[data-v-55049f08]{font-size:.9rem;white-space:pre-wrap}",""]);const s=n},7494:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,".main-image[data-v-7c95e040]{width:auto;max-width:90%;height:400px}.preview-image[data-v-7c95e040]{width:100%}.image-preview-container[data-v-7c95e040]{width:72px;height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;margin:5px}.image-preview[data-v-7c95e040]:hover{cursor:pointer}",""]);const s=n},7902:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,".date-container[data-v-2be6c764]{font-size:.8rem}.review-body[data-v-2be6c764]{white-space:pre-wrap}",""]);const s=n},7053:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,"textarea[data-v-7ec0b97c]{height:10rem}",""]);const s=n},7231:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>s});var i=r(3645),n=r.n(i)()((function(t){return t[1]}));n.push([t.id,".review-message[data-v-42c387fe]{font-size:.8rem;font-style:italic}.user-review[data-v-42c387fe]{list-style-type:none}",""]);const s=n},1478:(t,e,r)=>{"use strict";r.r(e),r.d(e,{default:()=>x});var i=r(2448),n=r(7797);const s={props:{pictures:{type:String,required:!1},title:{type:String,required:!1}},data:function(){return{images:JSON.parse(this.pictures),activeImageIndex:0}},computed:{picturePath:function(){return this.images[this.activeImageIndex]?"/storage/img/"+this.images[this.activeImageIndex]:"/img/cap.svg"}},methods:{getPreviewPicturePath:function(t){return"/storage/img/"+this.images[t]}}};r(8366);var a=r(1900);const o=(0,a.Z)(s,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"d-flex flex-column justify-content-center"},[r("div",{staticClass:"picture-container d-flex justify-content-center align-items-center"},[r("img",{staticClass:"main-image",attrs:{src:t.picturePath,alt:t.title}})]),t._v(" "),t.images.length?r("div",{staticClass:"p-3 d-sm-none d-md-block"},t._l(t.images,(function(e,i){return r("div",{key:i,staticClass:"\n        d-inline-block\n        image-preview-container\n        p-1\n        border border-1 border-dark\n      ",on:{click:function(e){t.activeImageIndex=i}}},[r("img",{staticClass:"preview-image",attrs:{src:t.getPreviewPicturePath(i),alt:t.title}})])})),0):t._e()])}),[],!1,null,"7c95e040",null).exports;const c={props:{slug:{type:String,required:!0},title:{type:String,required:!0}},computed:{items:function(){var t=this,e=JSON.parse(sessionStorage.getItem("menu")),r=e.subcategories.find((function(e){return e.slug===t.slug})),i=e.categories.find((function(t){return t.id===r.category_id}));return[{text:"Главная",href:"/"},{text:i.title,href:"/categories/".concat(i.id)},{text:r.title,href:"/subcategories/".concat(this.slug)},{text:this.title,active:!0}]}}};r(6357);const u=(0,a.Z)(c,(function(){var t=this,e=t.$createElement;return(t._self._c||e)("b-breadcrumb",{staticClass:"crumbs",attrs:{items:t.items}})}),[],!1,null,"1edb78ea",null).exports;var d=r(7615);function l(t,e){for(var r=0;r<e.length;r++){var i=e[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}var p=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.dateString=e}var e,r,i;return e=t,(r=[{key:"getDate",value:function(){return this.dateString.split("T")[0].split("-").reverse().join(".")}},{key:"getTime",value:function(){return this.dateString.split("T")[1].split(".")[0]}},{key:"getFullTime",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:" ";return this.getDate()+t+this.getTime()}}])&&l(e.prototype,r),i&&l(e,i),t}();const v={props:{review:{type:Object,required:!0}},computed:{createdDate:function(){return new p(this.review.created_at).getFullTime()}}};r(7638);const m=(0,a.Z)(v,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("li",{staticClass:"my-2"},[r("p",{staticClass:"mb-1"},[r("b",[t._v(t._s(t.review.user.name)+":")])]),t._v(" "),r("p",{staticClass:"date-container"},[t._v(t._s(t.createdDate))]),t._v(" "),r("p",{staticClass:"review-body"},[t._v(t._s(t.review.body))])])}),[],!1,null,"2be6c764",null).exports;const f={props:{productId:{type:Number,required:!0}},data:function(){return{reviewBody:"",processing:!1,editorConfig:{toolbarGroups:[{name:"document",groups:["document"]},{name:"clipboard",groups:["clipboard","undo"]},{name:"editing",groups:["find","selection"]},{name:"basicstyles",groups:["basicstyles","cleanup"]},{name:"font",groups:["size"]},{name:"paragraph",groups:["list","blocks","align","bidi"]},{name:"colors"},{name:"links"},{name:"tools"}],removeButtons:"Cut,Copy,Paste,Anchor"}}},methods:{addReview:function(){var t=this;if(!(this.reviewBody.length<10)){var e=new FormData;e.append("product_id",this.productId),e.append("review",this.reviewBody),new i.Z("reviews").create(e,this.productId).then((function(e){var r=e.data;t.$emit("add-review",r)})).finally((function(){t.processing=!1}))}}}};r(1800);function g(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,i=new Array(e);r<e;r++)i[r]=t[r];return i}const w={components:{ProductReviewComponent:m,ProductReviewFormComponent:(0,a.Z)(f,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.preventDefault(),t.addReview.apply(null,arguments)}}},[t.processing?r("svg-loading-component"):[r("div",{staticClass:"input-group"},[r("label",{staticClass:"input-group-text"},[t._v("Текст отзыва")]),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model",value:t.reviewBody,expression:"reviewBody"}],staticClass:"form-control",attrs:{"aria-label":"Текст отзыва","aria-describedby":"reviewHelpBlock"},domProps:{value:t.reviewBody},on:{input:function(e){e.target.composing||(t.reviewBody=e.target.value)}}})]),t._v(" "),r("div",{directives:[{name:"t",rawName:"v-t",value:"message.reviewHelpBlock",expression:"'message.reviewHelpBlock'"}],staticClass:"small text-secondary",attrs:{id:"reviewHelpBlock"}}),t._v(" "),r("button",{staticClass:"btn btn-primary mt-3",attrs:{type:"submit"}},[t._v("Отправить")])]],2)}),[],!1,null,"7ec0b97c",null).exports},props:{productId:{type:Number,required:!0}},data:function(){return{reviews:[]}},mounted:function(){var t=this;new i.Z("reviews").get(this.productId).then((function(e){t.reviews=e}))},computed:{user:function(){return this.$store.state.user},userReview:function(){var t=this;return this.reviews.find((function(e){var r;return e.user_id===(null===(r=t.user)||void 0===r?void 0:r.id)}))},canUserAddReview:function(){return this.user&&!this.userReview}},methods:{addReview:function(t){this.reviews=[t].concat(g(this.reviews))}}};r(279);const _=(0,a.Z)(w,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",{staticClass:"mb-4"},[r("h4",{staticClass:"d-inline-block"},[t._v("Отзывы")]),t._v("\n  ("+t._s(t.reviews.length)+")\n  "),r("p",[t.canUserAddReview?r("a",{attrs:{href:"#review-form"}},[t._v("добавить отзыв")]):t.user?t._e():r("span",{staticClass:"review-message"},[t._v("Только авторизованные пользователи могут оставлять отзывы")])]),t._v(" "),r("ul",{staticClass:"list-group"},[t.userReview?r("li",{staticClass:"list-group-item"},[r("details",[r("summary",[t._v("Ваш отзыв:")]),t._v(" "),r("product-review-component",{staticClass:"user-review p-3",attrs:{review:t.userReview}})],1)]):t._e(),t._v(" "),t._l(t.reviews,(function(t){return r("product-review-component",{key:t.id,tag:"li",staticClass:"list-group-item p-3",attrs:{review:t}})}))],2),t._v(" "),t.canUserAddReview?r("product-review-form-component",{staticClass:"my-3",attrs:{id:"review-form",productId:t.productId},on:{"add-review":t.addReview}}):t._e()],1)}),[],!1,null,"42c387fe",null).exports;var b=r(8041),y=r(8221);const C={components:{AddtoCartButtonComponent:n.Z,ProductPicturiesComponent:o,BaseBreadcrumbComponent:u,ProductRatingComponent:d.Z,ProductReviewsComponent:_,AuthorsLink:b.Z,ProductPropertiesTable:y.Z},data:function(){return{product:{},loading:!0}},created:function(){var t=this;new i.Z("product").get(this.$route.params.id).then((function(e){t.product=e})).finally((function(){return t.loading=!1}))}};r(3238);const x=(0,a.Z)(C,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"container mt-4"},[t.loading?r("svg-loading-component"):[r("base-breadcrumb-component",{attrs:{slug:t.product.subcategory_slug,title:t.product.title}}),t._v(" "),r("div",{staticClass:"row"},[r("section",{staticClass:"d-flex col-lg-5 col-md-4 justify-content-center"},[r("product-picturies-component",{attrs:{pictures:t.product.pictures,title:t.product.title}})],1),t._v(" "),r("section",{staticClass:"container col-lg-7 col-md-8"},[r("p",{staticClass:"header_authors font-italic"},[r("authors-link",{attrs:{authors:t.product.authors}})],1),t._v(" "),r("h2",[t._v(t._s(t.product.title))]),t._v(" "),r("product-rating-component",{attrs:{productId:t.product.id}}),t._v(" "),t._l(t.product.tags,(function(e){return r("router-link",{key:e.id,staticClass:"badge bg-primary text-light mr-1",attrs:{to:{name:"tag.show",params:{id:e.id}}}},[t._v(t._s(e.title))])})),t._v(" "),r("div",{staticClass:"row mt-2"},[r("div",{staticClass:"col-md-7"},[r("product-properties-table",{attrs:{product:t.product}})],1),t._v(" "),r("div",{staticClass:"col-md-5 text-center p-4 d-flex flex-column mt-3",attrs:{id:"priceBadge"}},[r("p",{staticClass:"price"},[t._v(t._s(t.product.price)+" руб.")]),t._v(" "),r("addto-cart-button-component",{staticClass:"justify-content-center",attrs:{size:"lg",productId:t.product.id,title:t.product.title}})],1)])],2)]),t._v(" "),r("p",{staticClass:"p-4",attrs:{id:"productDescription"}},[t._v(t._s(t.product.description))]),t._v(" "),r("hr"),t._v(" "),r("product-reviews-component",{attrs:{productId:t.product.id}})]],2)}),[],!1,null,"55049f08",null).exports},6357:(t,e,r)=>{var i=r(9067);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("6a7e1343",i,!0,{})},3238:(t,e,r)=>{var i=r(5735);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("29837c57",i,!0,{})},8366:(t,e,r)=>{var i=r(7494);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("02a866e5",i,!0,{})},7638:(t,e,r)=>{var i=r(7902);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("d7d73e2a",i,!0,{})},1800:(t,e,r)=>{var i=r(7053);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("3cb22110",i,!0,{})},279:(t,e,r)=>{var i=r(7231);i.__esModule&&(i=i.default),"string"==typeof i&&(i=[[t.id,i,""]]),i.locals&&(t.exports=i.locals);(0,r(5346).Z)("ff0d623c",i,!0,{})}}]);